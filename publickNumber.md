 # 微信公众号学习笔记

## 公众号包括哪些？https://kf.qq.com/faq/170815aUZjeQ170815mU7bI7.html
> 订阅号  + 服务号 + 企业微信（原企业号）+ 小程序

## 微信公众号菜单跳转到小程序，要填写的小程序路径是什么东西？
- 首先小程序得发布，如果关联一个没有发布的小程序，在手机里面点击的时候会提示：小程序尚未发布
- 等小程序发布会，应该会拿到一个地址，就填写这个地址就行了

## 服务号、订阅号功能区别（包括微信认证后的服务号和订阅号）？
> 订阅号都在订阅号的文件夹里面   服务号在微信聊天列表中
> 订阅号每天群发1条  服务号每月发4条
> 微信认证的服务号可以使用微信所有的的高级api ，比如微信支付等，但是微信认证的订阅号仅有部分的支持

## 微信认证后有哪些特权？
> 微信认证是微信公众平台为了确保公众帐号信息的真实性、安全性，目前提供给微信公众号进行微信认证的服务。
> 微信认证的服务号可以使用微信所有的的高级api ，比如微信支付等，但是微信认证的订阅号仅有部分的支持
> 微信认证后，获得更丰富的高级接口，向用户提供更有价值的个性化服务。
> 微信认证后，用户将在微信中看到微信认证特有的标识(有个对勾)。

## openid 是啥？如何获取？
- 用户关注后就可以获取到
- 用户的唯一标识，以snsapi_base为scope发起的网页授权，是用来获取进入页面的用户的openid的，并且是静默授权并自动跳转到回调页的。
- 获取到openid就可以调用用户类的接口等

## 一次性订阅消息是啥？
- 开发者可以通过一次性订阅消息授权让微信用户授权第三方移动应用（接入说明）或公众号，比如说授权原生的app登录等。
- 授权之后有的可以在微信的隐私-授权管理里面看到  ，有的看不到，不知道是不是一个bug

## 网页授权？
- 订阅号无法开通此接口 服务号必须通过微信认证
- 如果用户在微信客户端中访问第三方网页，公众号可以通过微信网页授权机制，来获取用户基本信息，进而实现业务逻辑。

## 微信JS-SDK？
- 微信JS-SDK是微信公众平台 面向网页开发者提供的基于微信内的网页开发工具包。

## 测试号？

- 测试号跟正式的微信公众号没有一点关系，跟正常的公众号相比是完全独立的。当使用微信扫描的时候，会虚拟一个微信号，appid，appsecret，并且和扫码的微信进行绑定，是不会变化的。
- 每个微信只可以管理一个测试号，但是可以作为 用户 去扫描其他的测试号的二维码，

## js接口安全域名？
- 微信网页开发用到
- 设置JS接口安全域名后，公众号开发者可在该域名下调用微信开放的JS接口（js-sdk）

## 公众号的客服消息？
- 需要通过认证以后，添加插件客服插件
- 小程序通过 button按钮 的客服的开放能力

## 消息自动回复为啥突然没有了？
- 消息自动回复：1个小时内回复1-2条内容； 关键词回复没有频率限制  https://kf.qq.com/faq/161221FZnEfe161221Ibmamq.html

## 服务器配置是啥？
- 开启后，用户发送的消息将自动转发到该配置地址，并且在网站中设置的自动回复和自定义菜单将失效。微信没有坐那么复杂的的自动回复，如果我们想实现复杂的回复，就需要服务器配置。
- 比如说一段语音，没有配置的是无法相应的，如果配置了就是这样的一个流程 页面语音-微信服务器-第三方的服务器-微信服务器-页面

## node.js 如何验证服务器配置地址的有效性？
- https://www.jianshu.com/p/ca35b7199539

## 获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意？静默授权？ 
- https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html

## 公众号是如何提供服务的？ https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html
- 公众号消息会话
- 公众号内网页

## UnionID是啥？如何获取？
> 同一用户，对同一个微信开放平台下的不同应用(比如一个开发者有多个公众号，哪天想统计粉丝了，相同的不算，就用到unionid了)，unionid是相同的。
> 获取：  GET https://api.weixin.qq.com/cgi-bin/user/info?access_token=ACCESS_TOKEN&openid=OPENID&lang=zh_CN   祥见官网文档 https://developers.weixin.qq.com/doc/offiaccount/User_Management/Get_users_basic_information_UnionID.html#UinonId

## ip白名单是啥？获取获取？
> 通过开发者ID及密码调用获取access_token接口时，需要设置访问来源IP为白名单
> 可以直接在浏览器搜本机ip，注意这里一定得是外网的ip，通过ipconfig获取的是内网的ip   

## 后台的自定义菜单和开发文档中的自定义菜单有啥区别？
- 后台的自定义菜单 个人认证的订阅号也是可以用的，开发文档中的不能使用
- 开发文档中的菜单的配置会更丰富，比如可以调用扫一扫，调起摄像头等。

## access_token是啥？如何获取？
> 公众平台以access_token为接口调用凭据，来调用接口，所有接口的调用（微信网页开发除外）需要先获取access_token，access_token在2小时内有效，过期需要重新获取，但1天内获取次数有限，开发者需自行存储，详见获取接口调用凭据（access_token）文档。公众平台接口调用仅支持80端口
>  access_token,通过openid和appsecret获得（注意ip白名单）   https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html

## 紧支持80端口啥意思？
> 80 ，浏览网页服务默认的端口号都是80，域名解析系统会把域名解析为ip，比如www.baidu.com 的ip 是182.61.200.6（通过ping www.baidu.com中来自什么的的回复获取），也可以直接写182.61.200.6来打开网页，或者是182.61.200.6:80 ,因为网页的端口都是80，所以可以默认不写


## 网页授权（采用oAuth2.0认证方式）有啥用？
>  网页授权就是为了获取用户的信息（其他授权）或者是是用户的openid（静默授权）
>  获取到用户的信息或者是openid后可以调用菜单栏 用户管理里面的接口

## 授权的两种方式
> 静默授权  **snsapi_base为scope发起的网页授权，是用来获取进入页面的用户的openid的**，并且是静默授权并自动跳转到回调页的。用户感知的就是直接进入了回调页（往往是业务页面）
> **以snsapi_userinfo为scope发起的网页授权，是用来获取用户的基本信息的**。但这种授权需要用户手动同意，并且由于用户同意过，所以无须关注，就可在授权后获取该用户的基本信息。

## 微信开放平台？
> 企业去注册，开发软件或者提供一些服务，供行业使用
> 个人没有办法注册，必须得以企业来注册，最后一步就是完善开发者资料（开发者资料里面首先就是企业的信息）。我用的钉钉的邮箱（qinpengsen4756@dingtalk.com）注册到这一步走不下去了。

